var __hasProp={}.hasOwnProperty,__extends=function(a,b){function c(){this.constructor=a}for(var d in b)__hasProp.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};!function(a,b){"function"==typeof define&&define.amd?define(["get-style-property/get-style-property","classie/classie","eventEmitter/EventEmitter","hammerjs/hammer"],b):a.SwitchRadio=b(a.getStyleProperty,a.classie,a.EventEmitter,a.Hammer)}(this,function(a,b,c,d){"use strict";var e,f,g,h,i;return window.CustomEvent||!function(){var a;a=function(a,b){var c;return b=b||{bubbles:!1,cancelable:!1,detail:void 0},c=document.createEvent("CustomEvent"),c.initCustomEvent(a,b.bubbles,b.cancelable,b.detail),c},a.prototype=window.Event.prototype,window.CustomEvent=a}(),h=a("transform"),e=0,g={},i={onToggle:function(){var a,b,c,d;for(this.toggle(),this.emitEvent("toggle",this.eventToggleParam),d=this.radios,b=0,c=d.length;c>b;b++)a=d[b],a.checked&&a.dispatchEvent(this.eventChange)},onStart:function(){this.sFlex.focus()},onMove:function(a){var c;c=null===this.side?-this.size/2+a.deltaX:this.side?-this.size+a.deltaX:a.deltaX,this.transform.translate.x=Math.min(0,Math.max(-this.size,c)),b.add(this.sFlex,"is-dragging"),this.active=!0,this.captionsActive(),this.requestUpdate()},onEnd:function(){this.side=Boolean(Math.abs(this.transform.translate.x)>this.size/2),b.remove(this.sFlex,"is-dragging"),i.onToggle.bind(this)()},onTap:function(a){var b,c;null===this.side?(c=this.container.getBoundingClientRect(),b=c.left+c.width/2,this.side=a.center.x<b):this.side=!this.side,i.onToggle.bind(this)()},onKeydown:function(a){switch(a.keyCode){case this.keyCodes.space:this.side=!this.side,i.onToggle.bind(this)();break;case this.keyCodes.right:this.side=!1,i.onToggle.bind(this)();break;case this.keyCodes.left:this.side=!0,i.onToggle.bind(this)()}},getTemplate:function(){return['<div class="switchRadio__flex" ','tabindex="0" role="slider" ','aria-valuemin="{valuemin}" aria-valuemax="{valuemax}" ','aria-valuetext="{valuetext}" aria-valuenow="{valuenow}" ','aria-labeledby="{labeledby}" aria-required="{required}">','<div class="switchRadio__caption switchRadio__caption--on">',"{captionOn}</div>",'<div class="switchRadio__knob"></div>','<div class="switchRadio__caption switchRadio__caption--off">',"{captionOff}</div>","</div>"].join("")},build:function(){var a,b,c,e,f,g,h,j,k;b=a="",e=this.container.getElementsByTagName("label"),2===e.length?(b=e[0].textContent,a=e[1].textContent):console.warn("✖ No labels"),h={captionOn:b,captionOff:a,valuemax:this.aria["aria-valuemax"],valuemin:this.aria["aria-valuemin"],valuenow:this.aria["aria-valuenow"],labeledby:this.aria["aria-labeledby"],required:this.aria["aria-required"]},c=this.template.replace(/\{(.*?)\}/g,function(a,b){return h[b]}),this.container.insertAdjacentHTML("afterbegin",c),this.sFlex=this.container.querySelector(".switchRadio__flex"),this.sOn=this.sFlex.querySelector(".switchRadio__caption--on"),this.sOff=this.sFlex.querySelector(".switchRadio__caption--off"),this.knob=this.sFlex.querySelector(".switchRadio__knob"),j=this.getSizes(),this.size=Math.max(j.sOn,j.sOff),this.sOn.style.width=this.sOff.style.width=""+this.size+"px",this.sFlex.style.width=2*this.size+j.knob+"px",this.container.style.width=this.size+j.knob+"px",g=new d.Pan({direction:d.DIRECTION_HORIZONTAL}),k=new d.Tap,f=new d.Manager(this.sFlex,{dragLockToAxis:!0,dragBlockHorizontal:!0,preventDefault:!0}),f.add(k),f.add(g),f.on("tap",i.onTap.bind(this)),f.on("panstart",i.onStart.bind(this)),f.on("pan",i.onMove.bind(this)),f.on("panend",i.onEnd.bind(this)),f.on("pancancel",i.onEnd.bind(this)),this.sFlex.addEventListener("keydown",i.onKeydown.bind(this),!1),this.eventToggleParam=[{instance:this,container:this.container,radios:this.radios,handler:this.sFlex}],this.eventChange=new CustomEvent("change"),i.onToggle.bind(this)()},initCheck:function(a){var b,c,d,e,f,g;for(e=/data-sr(\d+)/i,c=a.attributes,f=0,g=c.length;g>f;f++)b=c[f],e.test(b.name)&&(d=b.name);return d?!0:void 0}},f=function(a){function c(a,b,d){var f,h,j,k,l,m;if(!1==this instanceof c)return new c(a,b,d);if(d=d||null,b=b||!1,i.initCheck(a))return console.warn("The component has been initialized."),null;for(f=++e,this.container=a,this.container.srGUID=f,g[f]=this,a.setAttribute("data-sr"+f,""),this.radios=[],k=this.container.getElementsByTagName("input"),h=l=0,m=k.length;m>l;h=++l)j=k[h],"radio"===j.type&&(j.setAttribute("data-side",h),this.radios.push(j));return 2!==this.radios.length?(console.err("✖ No radios"),null):(this.template=i.getTemplate(),this.size=0,this.side=null,this.radios[0].checked&&!this.radios[1].checked&&(this.side=!1),this.radios[1].checked&&!this.radios[0].checked&&(this.side=!0),this.active=!1,this.ticking=!1,this.transform={translate:{x:0}},this.aria={"aria-valuemax":this.radios[0].title,"aria-valuemin":this.radios[1].title,"aria-valuetext":null,"aria-valuenow":null,"aria-labeledby":d,"aria-required":b},this.keyCodes={space:32,left:37,right:39},void i.build.bind(this)())}return __extends(c,a),c.prototype.toggle=function(a){var b,c,d,e;if(this.side=void 0!==a?a:this.side,null!==this.side)this.active=!0,this.transform.translate.x=this.side?-this.size:0,this.side?(this.radios[0].removeAttribute("checked"),this.radios[0].checked=!1,this.radios[1].setAttribute("checked",""),this.radios[1].checked=!0):(this.radios[1].removeAttribute("checked"),this.radios[1].checked=!1,this.radios[0].setAttribute("checked",""),this.radios[0].checked=!0);else for(this.active=!1,this.transform.translate.x=-this.size/2,e=this.radios,c=0,d=e.length;d>c;c++)b=e[c],b.removeAttribute("checked"),b.checked=!1;this.ariaAttr(),this.captionsActive(),this.requestUpdate()},c.prototype.swap=function(a){a=void 0!==a?a:null,this.side=null!==a?!a:!this.side,i.onToggle.bind(this)()},c.prototype.reset=function(){this.side=null,i.onToggle.bind(this)()},c.prototype.getSizes=function(){var a,b,c,d,e,f,g,h;return a=this.container.cloneNode(!0),a.style.visibility="hidden",a.style.position="absolute",document.body.appendChild(a),g=".switchRadio__flex > .switchRadio__caption--on",e=".switchRadio__flex > .switchRadio__caption--off",c=".switchRadio__flex > .switchRadio__knob",f=a.querySelector(g),d=a.querySelector(e),b=a.querySelector(c),h={sOn:f.clientWidth,sOff:d.clientWidth,knob:b.clientWidth},document.body.removeChild(a),a=null,h},c.prototype.ariaAttr=function(){var a;a=null===this.side?this.side:this.side?this.radios[1].title:this.radios[0].title,this.sFlex.setAttribute("aria-valuenow",a),this.sFlex.setAttribute("aria-valuetext",a)},c.prototype.captionsActive=function(){var a;a=this.active?"add":"remove",b[a](this.sOn,"is-active"),b[a](this.sOff,"is-active")},c.prototype.updateTransform=function(){var a;a=["translate3d("+this.transform.translate.x+"px, 0, 0)"],this.sFlex.style[h]=a.join(" "),this.ticking=!1},c.prototype.requestUpdate=function(){this.ticking===!1&&(this.ticking=!0,requestAnimationFrame(this.updateTransform.bind(this)))},c.prototype.destroy=function(){var a;a=this.container.style,a.width="",this.container.removeChild(this.sFlex),this.container.removeAttribute("data-sr"+this.container.srGUID),delete this.container.srGUID,this.sFlex=null},c}(c),f.data=function(a){var b;return b=a&&a.srGUID,b&&g[b]},f});
//# sourceMappingURL=switch.min.js.map